<mat-sidenav-container>
  <!-- drawer -->
  <mat-sidenav #sidenav>
    <!-- mode="side" opened="true" for desktop -->
    <mat-nav-list>
      <mat-list-item (click)="setCategory(null); sidenav.close()">
        <mat-icon matListIcon>list</mat-icon>
        <h3 matLine>All</h3>
      </mat-list-item>
      <a mat-list-item href="add/category">
        <mat-icon matListIcon>add</mat-icon>
        <h3 matLine>New category</h3>
      </a>

      <!-- categories -->
      <mat-divider *ngIf="categories.length"></mat-divider>
      <h3 matSubheader *ngIf="categories.length">Categories</h3>
      <ng-container *ngFor="let cat of categories">
        <mat-list-item>
          <mat-icon matListIcon>{{cat.icon}}</mat-icon>
          <h3 matLine (click)="setCategory(cat); sidenav.close()">{{cat.name | titlecase}}</h3>
          <button mat-icon-button [matMenuTriggerFor]="category">
            <mat-icon>more_vert</mat-icon>
          </button>
        </mat-list-item>
        <mat-menu #category="matMenu">
          <a mat-menu-item href="categories/{{cat.name}}">Edit</a>
          <button mat-menu-item>Delete</button>
        </mat-menu>
      </ng-container>

      <mat-divider></mat-divider>
      <h3 matSubheader>Menu</h3>
      <a mat-list-item href="calendar">
        <mat-icon matListIcon>event</mat-icon>
        <h3 matLine>Calendar</h3>
      </a>
      <a mat-list-item href="stats">
        <mat-icon matListIcon>pie_chart</mat-icon>
        <h3 matLine>Stats</h3>
      </a>
      <a mat-list-item href="">
        <mat-icon matListIcon>import_export</mat-icon>
        <h3 matLine>Import / Export</h3>
      </a>
    </mat-nav-list>
  </mat-sidenav>

  <div class="container">
    <!-- toolbar -->
    <mat-toolbar color="primary" *ngIf="!editMode; else toolbarEdit">
      <mat-toolbar-row>
        <button mat-icon-button (click)="sidenav.open()">
          <mat-icon aria-label="Menu">menu</mat-icon>
        </button>
        <span>{{ app_name | titlecase }}</span>

        <span class="toolbar-divider"></span>

        <button mat-icon-button>
          <mat-icon>search</mat-icon>
        </button>
        <button mat-icon-button [matMenuTriggerFor]="toolbar">
          <mat-icon>more_vert</mat-icon>
        </button>
      </mat-toolbar-row>

      <!-- chrono -->
      <mat-toolbar-row chrono *ngIf="currentActivity">
        <h1>{{time | date:'HH:mm'}}<small>{{time | date:'ss'}}</small></h1>
      </mat-toolbar-row>

      <mat-toolbar-row *ngIf="currentActivity">
        {{currentActivity.name | titlecase}} <span class="toolbar-divider"></span>
        <button mat-icon-button class="toto" (click)="stopActivity()">
          <mat-icon>done</mat-icon>
        </button>
      </mat-toolbar-row>
    </mat-toolbar>

    <!-- list -->
    <mat-nav-list>
      <mat-list-item *ngFor="let activity of activities">
        <span [ngClass]="activity.color" mat-list-icon></span>
        <h3 matLine>{{activity.name | titlecase}}</h3>
        <p matLine>{{activity.description |Â lowercase}}</p>
        <button mat-icon-button (click)="toogleActivity(activity)" *ngIf="!editMode">
          <mat-icon>access_time</mat-icon>
        </button>
        <a mat-icon-button href="activities/{{activity.name}}" *ngIf="editMode">
          <mat-icon>edit</mat-icon>
        </a>
        <button mat-icon-button *ngIf="editMode">
          <mat-icon>delete</mat-icon>
        </button>
      </mat-list-item>
    </mat-nav-list>

    <!-- FAB -->
    <a mat-fab id="fab" href="add/activity">
      <mat-icon aria-label="Add activity">add</mat-icon>
    </a>
  </div>
</mat-sidenav-container>


<!-- menus -->
<mat-menu #toolbar="matMenu">
  <button mat-menu-item (click)="toogleEditMode()">Edit</button>
</mat-menu>

<!-- templates -->
<ng-template #toolbarEdit>
  <mat-toolbar color="accent">
    <button mat-icon-button (click)="toogleEditMode()">
      <mat-icon>close</mat-icon>
    </button>
    <span>Edit activities</span>
  </mat-toolbar>
</ng-template>